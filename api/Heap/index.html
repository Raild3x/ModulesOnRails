<!doctype html>
<html lang="en" dir="ltr" class="plugin-moonwave plugin-id-moonwave">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.3.1">
<title data-rh="true">Heap | ModulesOnRails</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://raild3x.github.io/ModulesOnRails/api/Heap"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="Heap | ModulesOnRails"><meta data-rh="true" name="description" content="A generic [Heap](https://en.wikipedia.org/wiki/Heap_(data_structure)) implementation for both min and max heaps. It is designed
for allowing the association of a cost to a given value so that users are not restricted to just numbers as values.

### *What is a Heap?*
Heaps are an implementation of [Priority Queues](https://en.wikipedia.org/wiki/Priority_queue) that excel at tracking the smallest
or largest element in an array. They are commonly used in algorithms like Dijkstra&#x27;s shortest path algorithm and Huffman coding.

### Examples:

```lua title=&quot;Min Heap&quot;
local minHeap = Heap.min()
minHeap:Push(&quot;A&quot;, 5) -- A is the value, and 5 is the cost associated with it
minHeap:Push(&quot;B&quot;, 2)
minHeap:Push(&quot;C&quot;, 8)
minHeap:Push(&quot;D&quot;, 4)

-- look at the current lowest value
local minValue, minCost = minHeap:Peek()
print(minValue, minCost) -- B 2
```
```lua title=&quot;Max Heap&quot;
local maxHeap = Heap.max()
minHeap:Push(&quot;A&quot;, 5)
minHeap:Push(&quot;B&quot;, 2)
minHeap:Push(&quot;C&quot;, 8)
minHeap:Push(&quot;D&quot;, 4)

local poppedValue, costOfPoppedValue = maxHeap:Pop() -- pops off the top value
print(poppedValue, costOfPoppedValue) -- C 8

-- look at the new highest value
print(maxHeap:Peek()) -- A 5
```

___
:::tip MetaMethods
Supports the following metamethods:
- `__tostring`: Returns a string representation of the heap in a tree like display.
- [`__len`](/api/Heap#Size): Returns the number of elements in the heap. Equivalent to calling [`:Size()`](/api/Heap#Size).
    ```lua
    local minHeap = Heap.min()
    minHeap:Push(&quot;A&quot;, 5)
    minHeap:Push(&quot;B&quot;, 2)
    print(#minHeap) -- 2
    ```
- [`__iter`](/api/Heap#__iter): Provides an iterator for for loop usage
:::

:::tip Exported Types
This file exports a Heap type in the form of **`Heap&lt;T&gt;`** where **`T`** is the type of value stored in the heap.
Usually Luau can infer the type of **`T`** from your usage, but it may be useful to manually provide the type if
you are using more complex datatypes.
```lua
local Heap = require(ReplicatedStorage.Heap)
type Heap&lt;T&gt; = Heap.Heap&lt;T&gt;

local myHeap: Heap&lt;string&gt; = Heap.min()
myHeap:Push(&quot;A&quot;, 5)
```
:::

:::info Info for Nerds
*Read this only if you want to know more about the internals of this heap implmenentation.*

In order to support the association of a cost to a value, the heap is implemented as three separate arrays.
One to store the values, one to store the costs, and one to store the index pointing to the first two.
I used this structure in order to optimize for cache hits on table lookups since using an object based 
approach `Ex: {Value: T, Cost: number}` could cause the CPU to potentially miss the `Cost` data since it may
not be stored continguously in memory.

When a value is popped from the heap, its reference index is stored in a stack of open indices for reuse.
This is done to hopefully reduce fragmentation of the heap and improve the likelyhood of cache hits.

I originally opted to use a dynamic cost system such that you would provide a comparator function
to the constructor that would be used to determine the cost of each value. However, this introduced
a number of potential issues such as if the comparator function was not deterministic, causing the order to desync.
There could very likely be cases where the cost could change without the heap&#x27;s knowledge of it. So instead I opted
to require the cost to be provided at the time of insertion. Although technically the type definition specifies for
only number costs, you could in theory use any type luau considers comparable with relational operators.
:::"><meta data-rh="true" property="og:description" content="A generic [Heap](https://en.wikipedia.org/wiki/Heap_(data_structure)) implementation for both min and max heaps. It is designed
for allowing the association of a cost to a given value so that users are not restricted to just numbers as values.

### *What is a Heap?*
Heaps are an implementation of [Priority Queues](https://en.wikipedia.org/wiki/Priority_queue) that excel at tracking the smallest
or largest element in an array. They are commonly used in algorithms like Dijkstra&#x27;s shortest path algorithm and Huffman coding.

### Examples:

```lua title=&quot;Min Heap&quot;
local minHeap = Heap.min()
minHeap:Push(&quot;A&quot;, 5) -- A is the value, and 5 is the cost associated with it
minHeap:Push(&quot;B&quot;, 2)
minHeap:Push(&quot;C&quot;, 8)
minHeap:Push(&quot;D&quot;, 4)

-- look at the current lowest value
local minValue, minCost = minHeap:Peek()
print(minValue, minCost) -- B 2
```
```lua title=&quot;Max Heap&quot;
local maxHeap = Heap.max()
minHeap:Push(&quot;A&quot;, 5)
minHeap:Push(&quot;B&quot;, 2)
minHeap:Push(&quot;C&quot;, 8)
minHeap:Push(&quot;D&quot;, 4)

local poppedValue, costOfPoppedValue = maxHeap:Pop() -- pops off the top value
print(poppedValue, costOfPoppedValue) -- C 8

-- look at the new highest value
print(maxHeap:Peek()) -- A 5
```

___
:::tip MetaMethods
Supports the following metamethods:
- `__tostring`: Returns a string representation of the heap in a tree like display.
- [`__len`](/api/Heap#Size): Returns the number of elements in the heap. Equivalent to calling [`:Size()`](/api/Heap#Size).
    ```lua
    local minHeap = Heap.min()
    minHeap:Push(&quot;A&quot;, 5)
    minHeap:Push(&quot;B&quot;, 2)
    print(#minHeap) -- 2
    ```
- [`__iter`](/api/Heap#__iter): Provides an iterator for for loop usage
:::

:::tip Exported Types
This file exports a Heap type in the form of **`Heap&lt;T&gt;`** where **`T`** is the type of value stored in the heap.
Usually Luau can infer the type of **`T`** from your usage, but it may be useful to manually provide the type if
you are using more complex datatypes.
```lua
local Heap = require(ReplicatedStorage.Heap)
type Heap&lt;T&gt; = Heap.Heap&lt;T&gt;

local myHeap: Heap&lt;string&gt; = Heap.min()
myHeap:Push(&quot;A&quot;, 5)
```
:::

:::info Info for Nerds
*Read this only if you want to know more about the internals of this heap implmenentation.*

In order to support the association of a cost to a value, the heap is implemented as three separate arrays.
One to store the values, one to store the costs, and one to store the index pointing to the first two.
I used this structure in order to optimize for cache hits on table lookups since using an object based 
approach `Ex: {Value: T, Cost: number}` could cause the CPU to potentially miss the `Cost` data since it may
not be stored continguously in memory.

When a value is popped from the heap, its reference index is stored in a stack of open indices for reuse.
This is done to hopefully reduce fragmentation of the heap and improve the likelyhood of cache hits.

I originally opted to use a dynamic cost system such that you would provide a comparator function
to the constructor that would be used to determine the cost of each value. However, this introduced
a number of potential issues such as if the comparator function was not deterministic, causing the order to desync.
There could very likely be cases where the cost could change without the heap&#x27;s knowledge of it. So instead I opted
to require the cost to be provided at the time of insertion. Although technically the type definition specifies for
only number costs, you could in theory use any type luau considers comparable with relational operators.
:::"><link data-rh="true" rel="canonical" href="https://raild3x.github.io/ModulesOnRails/api/Heap"><link data-rh="true" rel="alternate" href="https://raild3x.github.io/ModulesOnRails/api/Heap" hreflang="en"><link data-rh="true" rel="alternate" href="https://raild3x.github.io/ModulesOnRails/api/Heap" hreflang="x-default"><link rel="stylesheet" href="/ModulesOnRails/assets/css/styles.1839e2d4.css">
<link rel="preload" href="/ModulesOnRails/assets/js/runtime~main.daa86be0.js" as="script">
<link rel="preload" href="/ModulesOnRails/assets/js/main.770f3d02.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/ModulesOnRails/"><b class="navbar__title text--truncate">ModulesOnRails</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/ModulesOnRails/api/">API</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/Raild3x/ModulesOnRails" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Loading..." aria-label="Search" class="navbar__search-input search-bar" disabled=""></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docPageContainer_wNNk"><div class="docPage_Dpn1"><div class="docSidebarContainer_o_re"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/ModulesOnRails/api/BaseObject">​Base​Object</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/ModulesOnRails/api/Roam">​Roam</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/ModulesOnRails/api/TableManager">TableManager</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/ModulesOnRails/api/TableReplicator">TableReplicator</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/ModulesOnRails/api/NetWire">NetWire</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/ModulesOnRails/api/Component">Instance Component Systems</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/ModulesOnRails/api/DropletManager">DropletManager</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/ModulesOnRails/api/AdjustableTimer">AdjustableTimer [Unreleased]</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/ModulesOnRails/api/PlayerProfileManager">PlayerDataManagement [Unreleased]</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/ModulesOnRails/api/CmdrHandler">Admin Commands [Cmdr]</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/ModulesOnRails/api/Queue">Data Structures</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ModulesOnRails/api/Queue">​Queue</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/ModulesOnRails/api/Heap">​Heap</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ModulesOnRails/api/LooseTightDoubleGrid">​Loose​Tight​Double​Grid</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/ModulesOnRails/api/ObjectCache">​Object​Cache</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/ModulesOnRails/api/ProbabilityDistributor">​Probability​Distributor</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/ModulesOnRails/api/PromValue">​Prom​Value</a></li></ul></nav></div></div><main class="docMainContainer_HJE1"><div class="container padding-vert--lg"><div class="row"><div class="col docItemCol_MU3C"><div class="docItemContainer_Wv98"><article><div class="member_J0w1 markdown"><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_oUs_"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><header><h1 class="docTitle_mZRt" style="text-decoration:none"><span style="display:inline-block">Heap</span></h1><div class="luaClassTags_EipM"></div><label class="privateToggle_lmfE"><span class="privateCheckboxContainer_psRa"><input type="checkbox" class="privateCheckboxInternal_IKP2" name="checkbox"><span class="privateCheckboxControl_Ov8U"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true" focusable="false"><path fill="none" stroke="currentColor" stroke-width="3" d="M4 11.91l5.37 5.37L19.79 5.59"></path></svg></span></span><span class="privateCheckboxLabel_Vmvs">Show Private</span></label><div>
<p>
  A generic <a href="https://en.wikipedia.org/wiki/Heap_(data_structure)" target="_blank">Heap</a> implementation for both min and max heaps. It is designed
  for allowing the association of a cost to a given value so that users are not restricted to just numbers as values.
</p>
<h3><em>What is a Heap?</em></h3>
<p>
  Heaps are an implementation of <a href="https://en.wikipedia.org/wiki/Priority_queue" target="_blank">Priority Queues</a> that excel at tracking the smallest
  or largest element in an array. They are commonly used in algorithms like Dijkstra's shortest path algorithm and Huffman coding.
</p>
<h3>Examples:</h3>
<pre class="language-lua"><code class="language-lua"><span class="token keyword">local</span> minHeap <span class="token operator">=</span> Heap<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
minHeap<span class="token punctuation">:</span><span class="token function">Push</span><span class="token punctuation">(</span><span class="token string">"A"</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span> <span class="token comment">-- A is the value, and 5 is the cost associated with it</span>
minHeap<span class="token punctuation">:</span><span class="token function">Push</span><span class="token punctuation">(</span><span class="token string">"B"</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
minHeap<span class="token punctuation">:</span><span class="token function">Push</span><span class="token punctuation">(</span><span class="token string">"C"</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span>
minHeap<span class="token punctuation">:</span><span class="token function">Push</span><span class="token punctuation">(</span><span class="token string">"D"</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span>

<span class="token comment">-- look at the current lowest value</span>
<span class="token keyword">local</span> minValue<span class="token punctuation">,</span> minCost <span class="token operator">=</span> minHeap<span class="token punctuation">:</span><span class="token function">Peek</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">print</span><span class="token punctuation">(</span>minValue<span class="token punctuation">,</span> minCost<span class="token punctuation">)</span> <span class="token comment">-- B 2</span>
</code></pre>
<pre class="language-lua"><code class="language-lua"><span class="token keyword">local</span> maxHeap <span class="token operator">=</span> Heap<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
minHeap<span class="token punctuation">:</span><span class="token function">Push</span><span class="token punctuation">(</span><span class="token string">"A"</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span>
minHeap<span class="token punctuation">:</span><span class="token function">Push</span><span class="token punctuation">(</span><span class="token string">"B"</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
minHeap<span class="token punctuation">:</span><span class="token function">Push</span><span class="token punctuation">(</span><span class="token string">"C"</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span>
minHeap<span class="token punctuation">:</span><span class="token function">Push</span><span class="token punctuation">(</span><span class="token string">"D"</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span>

<span class="token keyword">local</span> poppedValue<span class="token punctuation">,</span> costOfPoppedValue <span class="token operator">=</span> maxHeap<span class="token punctuation">:</span><span class="token function">Pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">-- pops off the top value</span>
<span class="token function">print</span><span class="token punctuation">(</span>poppedValue<span class="token punctuation">,</span> costOfPoppedValue<span class="token punctuation">)</span> <span class="token comment">-- C 8</span>

<span class="token comment">-- look at the new highest value</span>
<span class="token function">print</span><span class="token punctuation">(</span>maxHeap<span class="token punctuation">:</span><span class="token function">Peek</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">-- A 5</span>
</code></pre>
<hr>
<div class="admonition admonition-tip alert alert--success">
  <div class="admonition-heading">
    <h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16">
          <path d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path>
        </svg></span>MetaMethods</h5>
  </div>
  <div class="admonition-content">
    <p>Supports the following metamethods:</p>
    <ul>
      <li><code>__tostring</code>: Returns a string representation of the heap in a tree like display.</li>
      <li><a href="/ModulesOnRails/api/Heap#Size"><code>__len</code></a>: Returns the number of elements in the heap. Equivalent to calling <a href="/ModulesOnRails/api/Heap#Size"><code>:Size()</code></a>.
        <pre class="language-lua"><code class="language-lua"><span class="token keyword">local</span> minHeap <span class="token operator">=</span> Heap<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
minHeap<span class="token punctuation">:</span><span class="token function">Push</span><span class="token punctuation">(</span><span class="token string">"A"</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span>
minHeap<span class="token punctuation">:</span><span class="token function">Push</span><span class="token punctuation">(</span><span class="token string">"B"</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token operator">#</span>minHeap<span class="token punctuation">)</span> <span class="token comment">-- 2</span>
</code></pre>
      </li>
      <li><a href="/ModulesOnRails/api/Heap#__iter"><code>__iter</code></a>: Provides an iterator for for loop usage</li>
    </ul>
  </div>
</div>
<div class="admonition admonition-tip alert alert--success">
  <div class="admonition-heading">
    <h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16">
          <path d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path>
        </svg></span>Exported Types</h5>
  </div>
  <div class="admonition-content">
    <p>
      This file exports a Heap type in the form of <strong><code>Heap&#x3C;T></code></strong> where <strong><code>T</code></strong> is the type of value stored in the heap.
      Usually Luau can infer the type of <strong><code>T</code></strong> from your usage, but it may be useful to manually provide the type if
      you are using more complex datatypes.
    </p>
    <pre class="language-lua"><code class="language-lua"><span class="token keyword">local</span> Heap <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span>ReplicatedStorage<span class="token punctuation">.</span>Heap<span class="token punctuation">)</span>
type Heap<span class="token operator">&#x3C;</span>T<span class="token operator">></span> <span class="token operator">=</span> Heap<span class="token punctuation">.</span>Heap<span class="token operator">&#x3C;</span>T<span class="token operator">></span>

<span class="token keyword">local</span> myHeap<span class="token punctuation">:</span> Heap<span class="token operator">&#x3C;</span>string<span class="token operator">></span> <span class="token operator">=</span> Heap<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
myHeap<span class="token punctuation">:</span><span class="token function">Push</span><span class="token punctuation">(</span><span class="token string">"A"</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span>
</code></pre>
  </div>
</div>
<div class="admonition admonition-info alert alert--info">
  <div class="admonition-heading">
    <h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16">
          <path d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path>
        </svg></span>Info for Nerds</h5>
  </div>
  <div class="admonition-content">
    <p><em>Read this only if you want to know more about the internals of this heap implmenentation.</em></p>
    <p>
      In order to support the association of a cost to a value, the heap is implemented as three separate arrays.
      One to store the values, one to store the costs, and one to store the index pointing to the first two.
      I used this structure in order to optimize for cache hits on table lookups since using an object based
      approach <code>Ex: {Value: T, Cost: number}</code> could cause the CPU to potentially miss the <code>Cost</code> data since it may
      not be stored continguously in memory.
    </p>
    <p>
      When a value is popped from the heap, its reference index is stored in a stack of open indices for reuse.
      This is done to hopefully reduce fragmentation of the heap and improve the likelyhood of cache hits.
    </p>
    <p>
      I originally opted to use a dynamic cost system such that you would provide a comparator function
      to the constructor that would be used to determine the cost of each value. However, this introduced
      a number of potential issues such as if the comparator function was not deterministic, causing the order to desync.
      There could very likely be cases where the cost could change without the heap's knowledge of it. So instead I opted
      to require the cost to be provided at the time of insertion. Although technically the type definition specifies for
      only number costs, you could in theory use any type luau considers comparable with relational operators.
    </p>
  </div>
</div>
</div></header><h2 class="anchor anchorWithStickyNavbar_LWe7" id="functions">Functions<a href="#functions" class="hash-link" aria-label="Direct link to Functions" title="Direct link to Functions">​</a></h2><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="min"><code style="text-decoration:none">min</code><a href="#min" class="hash-link" aria-label="Direct link to min" title="Direct link to min">​</a></h3><span class="docTag__6UZ" style="border-color:#dc0073;color:#dc0073">static</span><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/Raild3x/ModulesOnRails/blob/main/lib/heap/src/init.luau#L169"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code>Heap<!-- -->.</code><code class="green_DgR4">min</code><code>(</code><code>) → </code><code class="blue_P4bS"><a style="text-decoration:underline;color:inherit" href="/ModulesOnRails/api/Heap">Heap</a></code><code class="op_lSLc">&lt;</code><code class="blue_P4bS">T</code><code class="op_lSLc">&gt;</code><span class="inlineDescription_G7Er">-- <span>
<p>A min-heap instance.</p>
</span></span></div><div>
<p>Creates a min-heap where the smallest element is always on top.</p>
</div><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="max"><code style="text-decoration:none">max</code><a href="#max" class="hash-link" aria-label="Direct link to max" title="Direct link to max">​</a></h3><span class="docTag__6UZ" style="border-color:#dc0073;color:#dc0073">static</span><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/Raild3x/ModulesOnRails/blob/main/lib/heap/src/init.luau#L178"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code>Heap<!-- -->.</code><code class="green_DgR4">max</code><code>(</code><code>) → </code><code class="blue_P4bS"><a style="text-decoration:underline;color:inherit" href="/ModulesOnRails/api/Heap">Heap</a></code><code class="op_lSLc">&lt;</code><code class="blue_P4bS">T</code><code class="op_lSLc">&gt;</code><span class="inlineDescription_G7Er">-- <span>
<p>A max-heap instance.</p>
</span></span></div><div>
<p>Creates a max-heap where the largest element is always on top.</p>
</div><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="Peek"><code style="text-decoration:none">Peek</code><a href="#Peek" class="hash-link" aria-label="Direct link to Peek" title="Direct link to Peek">​</a></h3><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/Raild3x/ModulesOnRails/blob/main/lib/heap/src/init.luau#L197"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code>Heap<!-- -->:</code><code class="green_DgR4">Peek</code><code>(</code><code>) → </code><code>(</code><div class="inset_uKQm"><div><code class="blue_P4bS">T?</code><code>,</code><span class="inlineDescription_G7Er">-- <span>
<p>The top value from the heap.</p>
</span></span></div><div><code class="blue_P4bS">number?</code><span class="inlineDescription_G7Er">-- <span>
<p>The cost of the top value.</p>
</span></span></div></div><code>)</code></div><div>
<p>
  Returns the <em>top value</em> from the heap without removing it.
  The top value is the value with the lowest cost in a min-heap
  and the value with the highest cost in a max-heap.
  If the heap is empty, nil is returned for both values.
</p>
<p><em>Time Complexity:</em> Runs in <code>O(1)</code> time.</p>
</div><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="Push"><code style="text-decoration:none">Push</code><a href="#Push" class="hash-link" aria-label="Direct link to Push" title="Direct link to Push">​</a></h3><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/Raild3x/ModulesOnRails/blob/main/lib/heap/src/init.luau#L229"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code>Heap<!-- -->:</code><code class="green_DgR4">Push</code><code>(</code><div class="inset_uKQm"><div><code>value<!-- -->: </code><code class="blue_P4bS">T</code><code>,</code></div><div><code>cost<!-- -->: </code><code class="blue_P4bS">number?</code></div></div><code>) → </code><code>(</code><code>)</code></div><div>
<p>Inserts a value into the heap.</p>
<p><em>Time Complexity:</em> Runs in worst case <code>O(log n)</code> time.</p>
<pre class="language-lua"><code class="language-lua"><span class="token keyword">local</span> minHeap <span class="token operator">=</span> Heap<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

minHeap<span class="token punctuation">:</span><span class="token function">Push</span><span class="token punctuation">(</span><span class="token string">"A"</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span>
minHeap<span class="token punctuation">:</span><span class="token function">Push</span><span class="token punctuation">(</span><span class="token string">"B"</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
minHeap<span class="token punctuation">:</span><span class="token function">Push</span><span class="token punctuation">(</span><span class="token string">"C"</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span>

<span class="token keyword">local</span> minValue<span class="token punctuation">,</span> minCost <span class="token operator">=</span> minHeap<span class="token punctuation">:</span><span class="token function">Peek</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">print</span><span class="token punctuation">(</span>minValue<span class="token punctuation">,</span> minCost<span class="token punctuation">)</span> <span class="token comment">-- B 2</span>
</code></pre>
<div class="admonition admonition-info alert alert--info">
  <div class="admonition-heading">
    <h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16">
          <path d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path>
        </svg></span>Cost</h5>
  </div>
  <div class="admonition-content">
    <p>
      If no <strong>cost</strong> is given, the value itself is used as the cost.
      Ensure that the given value is comparable with relational operators.
    </p>
    <pre class="language-lua"><code class="language-lua"><span class="token keyword">local</span> minHeap <span class="token operator">=</span> Heap<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
minHeap<span class="token punctuation">:</span><span class="token function">Push</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">-- uses 2 for both value and cost</span>
<span class="token function">print</span><span class="token punctuation">(</span>minHeap<span class="token punctuation">:</span><span class="token function">Peek</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">-- 2 2</span>
</code></pre>
  </div>
</div>
</div><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="Pop"><code style="text-decoration:none">Pop</code><a href="#Pop" class="hash-link" aria-label="Direct link to Pop" title="Direct link to Pop">​</a></h3><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/Raild3x/ModulesOnRails/blob/main/lib/heap/src/init.luau#L257"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code>Heap<!-- -->:</code><code class="green_DgR4">Pop</code><code>(</code><code>) → </code><code>(</code><div class="inset_uKQm"><div><code class="blue_P4bS">T?</code><code>,</code></div><div><code class="blue_P4bS">number?</code></div></div><code>)</code></div><div>
<p>Removes and returns the top value from the heap.</p>
<p><em>Time Complexity:</em> Runs in worst case <code>O(log n)</code> time.</p>
</div><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="Size"><code style="text-decoration:none">Size</code><a href="#Size" class="hash-link" aria-label="Direct link to Size" title="Direct link to Size">​</a></h3><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/Raild3x/ModulesOnRails/blob/main/lib/heap/src/init.luau#L291"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code>Heap<!-- -->:</code><code class="green_DgR4">Size</code><code>(</code><code>) → </code><code class="blue_P4bS">number</code></div><div>
<p>
  Returns the number of elements in the heap.
  Equivalent to using the <code>#</code> operator on the heap.
</p>
<p><em>Time Complexity:</em> Runs in <code>O(1)</code> time.</p>
</div><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="Has"><code style="text-decoration:none">Has</code><a href="#Has" class="hash-link" aria-label="Direct link to Has" title="Direct link to Has">​</a></h3><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/Raild3x/ModulesOnRails/blob/main/lib/heap/src/init.luau#L302"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code>Heap<!-- -->:</code><code class="green_DgR4">Has</code><code>(</code><div class="inset_uKQm"><div><code>valueToCheckFor<!-- -->: </code><code class="blue_P4bS">T</code><code>,</code></div><div><code>cost<!-- -->: </code><code class="blue_P4bS">number?</code></div></div><code>) → </code><code class="blue_P4bS">boolean</code></div><div>
<p>
  Takes a value or function and checks if the heap contains it.
  If a cost is provided then it will also ensure the cost matches.
  Returns true if the heap contains a specified value.
</p>
<p><em>Time Complexity:</em> Runs in worst case <code>O(n)</code> time.</p>
</div><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="UpdateCost"><code style="text-decoration:none">UpdateCost</code><a href="#UpdateCost" class="hash-link" aria-label="Direct link to UpdateCost" title="Direct link to UpdateCost">​</a></h3><div class="repositoryDetailsContainer_BPdw"><span class="releaseVersion_EonW">unreleased</span><a class="sourceButton_sEho" href="https://github.com/Raild3x/ModulesOnRails/blob/main/lib/heap/src/init.luau#L366"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code>Heap<!-- -->:</code><code class="green_DgR4">UpdateCost</code><code>(</code><div class="inset_uKQm"><div><code>valueToUpdate<!-- -->: </code><code class="blue_P4bS">T</code><code class="op_lSLc"> | </code><code class="purple_ieR2">(</code><code>value<!-- -->: </code><code class="blue_P4bS">T</code><code class="purple_ieR2">)</code><code class="purple_ieR2"> → </code><code class="purple_ieR2">(</code><code class="blue_P4bS">boolean</code><code class="purple_ieR2">)</code><code>,</code><span class="inlineDescription_G7Er">-- <span>
<p>The value to update the cost of.</p>
</span></span></div><div><code>newCost<!-- -->: </code><code class="blue_P4bS">number</code><code class="op_lSLc"> | </code><code class="purple_ieR2">(</code><div class="inset_uKQm"><code>value<!-- -->: </code><code class="blue_P4bS">T</code><code class="purple_ieR2">,</code></div><div class="inset_uKQm"><code>oldCost<!-- -->: </code><code class="blue_P4bS">number</code></div><code class="purple_ieR2">)</code><code class="purple_ieR2"> → </code><code class="blue_P4bS">number</code><code>,</code><span class="inlineDescription_G7Er">-- <span>
<p>The new cost to assign to the value. Can also be a function that takes the old cost and returns a new cost.</p>
</span></span></div><div><code>updateAll<!-- -->: </code><code class="blue_P4bS">boolean?</code><span class="inlineDescription_G7Er">-- <span>
<p>If true, all occurrences of the value will be updated. Defaults to false.</p>
</span></span></div></div><code>) → </code><code class="blue_P4bS">boolean</code><span class="inlineDescription_G7Er">-- <span>
<p>True if the cost was updated, false otherwise.</p>
</span></span></div><div>
<p>Updates the cost of a value in the heap. If no value is found, false is returned.</p>
<div class="admonition admonition-caution alert alert--warning">
  <div class="admonition-heading">
    <h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16">
          <path d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path>
        </svg></span>Repeated Values</h5>
  </div>
  <div class="admonition-content">
    <p>
      If you have multiple instances of the same value, this method will only update the cost of the first valid instance found,
      unless the third parameter <code>updateAll</code> is set to <code>true</code>. There is no guarantee of which instance will be found first.
      Using <code>updateAll</code> can be expensive as it may need to perform a large resorting of the heap to ensure proper ordering.
    </p>
  </div>
</div>
<pre class="language-lua"><code class="language-lua"><span class="token keyword">local</span> minHeap <span class="token operator">=</span> Heap<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
minHeap<span class="token punctuation">:</span><span class="token function">Push</span><span class="token punctuation">(</span><span class="token string">"A"</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span>
minHeap<span class="token punctuation">:</span><span class="token function">Push</span><span class="token punctuation">(</span><span class="token string">"B"</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
minHeap<span class="token punctuation">:</span><span class="token function">Push</span><span class="token punctuation">(</span><span class="token string">"C"</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span>
minHeap<span class="token punctuation">:</span><span class="token function">Push</span><span class="token punctuation">(</span><span class="token string">"D"</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>

<span class="token function">print</span><span class="token punctuation">(</span>minHeap<span class="token punctuation">:</span><span class="token function">Peek</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">-- B 2</span>
minHeap<span class="token punctuation">:</span><span class="token function">UpdateCost</span><span class="token punctuation">(</span><span class="token string">"A"</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
<span class="token function">print</span><span class="token punctuation">(</span>minHeap<span class="token punctuation">:</span><span class="token function">Peek</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">-- A 1</span>
</code></pre>
<pre class="language-lua"><code class="language-lua">    <span class="token comment">-- update the cost of the first value that matches either "A" or "B" to 15</span>
minHeap<span class="token punctuation">:</span><span class="token function">UpdateCost</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
    <span class="token keyword">return</span> value <span class="token operator">==</span> <span class="token string">"A"</span> <span class="token keyword">or</span> value <span class="token operator">==</span> <span class="token string">"B"</span>
<span class="token keyword">end</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">,</span> <span class="token keyword">false</span><span class="token punctuation">)</span>

<span class="token comment">-- update the cost of all values that match "A" or "B" to 30</span>
minHeap<span class="token punctuation">:</span><span class="token function">UpdateCost</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
    <span class="token keyword">return</span> value <span class="token operator">==</span> <span class="token string">"A"</span> <span class="token keyword">or</span> value <span class="token operator">==</span> <span class="token string">"B"</span>
<span class="token keyword">end</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token keyword">true</span><span class="token punctuation">)</span>
</code></pre>
</div><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="RemoveFirstOccurrence"><code style="text-decoration:none">RemoveFirstOccurrence</code><a href="#RemoveFirstOccurrence" class="hash-link" aria-label="Direct link to RemoveFirstOccurrence" title="Direct link to RemoveFirstOccurrence">​</a></h3><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/Raild3x/ModulesOnRails/blob/main/lib/heap/src/init.luau#L470"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code>Heap<!-- -->:</code><code class="green_DgR4">RemoveFirstOccurrence</code><code>(</code><code>valueToRemove<!-- -->: </code><code class="blue_P4bS">T</code><code>) → </code><code class="blue_P4bS">boolean</code></div><div>
<p>
  Removes the first occurrence of a given value from the heap.
  Heaps are not optimized for search removals, so this method should
  be used sparingly.
</p>
</div><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="RemoveAllOccurrences"><code style="text-decoration:none">RemoveAllOccurrences</code><a href="#RemoveAllOccurrences" class="hash-link" aria-label="Direct link to RemoveAllOccurrences" title="Direct link to RemoveAllOccurrences">​</a></h3><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/Raild3x/ModulesOnRails/blob/main/lib/heap/src/init.luau#L499"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code>Heap<!-- -->:</code><code class="green_DgR4">RemoveAllOccurrences</code><code>(</code><code>valueToRemove<!-- -->: </code><code class="blue_P4bS">T</code><code>) → </code><code class="blue_P4bS">number</code></div><div>
<p>
  Removes all occurrences of a value from the heap and returns the
  number of occurrences removed. Heaps are not optimized for search
  removals, so this method should be used sparingly.
</p>
</div><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ToTree"><code style="text-decoration:none">ToTree</code><a href="#ToTree" class="hash-link" aria-label="Direct link to ToTree" title="Direct link to ToTree">​</a></h3><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/Raild3x/ModulesOnRails/blob/main/lib/heap/src/init.luau#L531"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code>Heap<!-- -->:</code><code class="green_DgR4">ToTree</code><code>(</code><code>) → </code><code class="blue_P4bS">Branch</code><code class="op_lSLc">&lt;</code><code class="blue_P4bS">T</code><code class="op_lSLc">&gt;</code><code class="blue_P4bS">?</code><span class="inlineDescription_G7Er">-- <span>
<p>A tree representation of the heap.</p>
</span></span></div><div>
<p>
  A utility method that converts the heap into a tree structure.
  This is useful for debugging and visualizing the heap.
</p>
<p><code>type Branch&#x3C;T> = {Value: T, Left: Branch&#x3C;T>?, Right: Branch&#x3C;T>?}</code></p>
</div><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="__iter"><span style="font-style:italic">iterating over <!-- -->Heap</span><a href="#__iter" class="hash-link" aria-label="Direct link to __iter" title="Direct link to __iter">​</a></h3><span class="docTag__6UZ" style="border-color:#ff793f;color:#ff793f">metamethod</span><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/Raild3x/ModulesOnRails/blob/main/lib/heap/src/init.luau#L723"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code class="red_AwJO">for</code>  <span><code>value<!-- -->: </code><code class="blue_P4bS">T</code><code>,</code> </span><span><code>cost<!-- -->: </code><code class="blue_P4bS">number</code> </span> <code class="red_AwJO">in</code>  <code class="green_DgR4">Heap</code>  <code class="red_AwJO">do</code></div><div>
<p>
  MetaMethod for iterating over the heap.
  In a for loop, the first variable is the <code>Value</code> and the second variable is the <code>Cost</code>.
</p>
<pre class="language-lua"><code class="language-lua"><span class="token keyword">local</span> minHeap <span class="token operator">=</span> Heap<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
minHeap<span class="token punctuation">:</span><span class="token function">Push</span><span class="token punctuation">(</span><span class="token string">"A"</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span>
minHeap<span class="token punctuation">:</span><span class="token function">Push</span><span class="token punctuation">(</span><span class="token string">"B"</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
minHeap<span class="token punctuation">:</span><span class="token function">Push</span><span class="token punctuation">(</span><span class="token string">"C"</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span>
minHeap<span class="token punctuation">:</span><span class="token function">Push</span><span class="token punctuation">(</span><span class="token string">"A"</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span>
minHeap<span class="token punctuation">:</span><span class="token function">Push</span><span class="token punctuation">(</span><span class="token string">"D"</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>

<span class="token keyword">for</span> value<span class="token punctuation">:</span> string<span class="token punctuation">,</span> cost<span class="token punctuation">:</span> number <span class="token keyword">in</span> minHeap <span class="token keyword">do</span>
    <span class="token function">print</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> cost<span class="token punctuation">)</span>
<span class="token keyword">end</span>
</code></pre>
<pre><code>-- Output: the order may vary
B 2
A 4
C 8
A 5
D 10
</code></pre>
<div class="admonition admonition-caution alert alert--warning">
  <div class="admonition-heading">
    <h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16">
          <path d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path>
        </svg></span>Manipulating the Heap during iteration</h5>
  </div>
  <div class="admonition-content">
    <p>
      It is not recommended to modify the Heap during iteration as it may cause undefined behavior.
      Internal orders may change and the iterator may not be able to find the next value.
    </p>
  </div>
</div>
<div class="admonition admonition-caution alert alert--warning">
  <div class="admonition-heading">
    <h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16">
          <path d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path>
        </svg></span>Iteration Order</h5>
  </div>
  <div class="admonition-content">
    <p>There is no guaranteed order of iteration. You should assume you will receive the values in a random order.</p>
  </div>
</div>
</div></div></article></div><details><summary>Show raw api</summary><pre style="max-width:100%;white-space:pre-wrap">{
    &quot;functions&quot;: [
        {
            &quot;name&quot;: &quot;min&quot;,
            &quot;desc&quot;: &quot;Creates a min-heap where the smallest element is always on top.&quot;,
            &quot;params&quot;: [],
            &quot;returns&quot;: [
                {
                    &quot;desc&quot;: &quot;A min-heap instance.&quot;,
                    &quot;lua_type&quot;: &quot;Heap&lt;T&gt;&quot;
                }
            ],
            &quot;function_type&quot;: &quot;static&quot;,
            &quot;tags&quot;: [
                &quot;static&quot;
            ],
            &quot;source&quot;: {
                &quot;line&quot;: 169,
                &quot;path&quot;: &quot;lib/heap/src/init.luau&quot;
            }
        },
        {
            &quot;name&quot;: &quot;max&quot;,
            &quot;desc&quot;: &quot;Creates a max-heap where the largest element is always on top.&quot;,
            &quot;params&quot;: [],
            &quot;returns&quot;: [
                {
                    &quot;desc&quot;: &quot;A max-heap instance.&quot;,
                    &quot;lua_type&quot;: &quot;Heap&lt;T&gt;&quot;
                }
            ],
            &quot;function_type&quot;: &quot;static&quot;,
            &quot;tags&quot;: [
                &quot;static&quot;
            ],
            &quot;source&quot;: {
                &quot;line&quot;: 178,
                &quot;path&quot;: &quot;lib/heap/src/init.luau&quot;
            }
        },
        {
            &quot;name&quot;: &quot;Peek&quot;,
            &quot;desc&quot;: &quot;Returns the *top value* from the heap without removing it.\nThe top value is the value with the lowest cost in a min-heap \nand the value with the highest cost in a max-heap.\nIf the heap is empty, nil is returned for both values.\n\n\n*Time Complexity:* Runs in `O(1)` time.&quot;,
            &quot;params&quot;: [],
            &quot;returns&quot;: [
                {
                    &quot;desc&quot;: &quot;The top value from the heap.&quot;,
                    &quot;lua_type&quot;: &quot;T?&quot;
                },
                {
                    &quot;desc&quot;: &quot;The cost of the top value.&quot;,
                    &quot;lua_type&quot;: &quot;number?&quot;
                }
            ],
            &quot;function_type&quot;: &quot;method&quot;,
            &quot;source&quot;: {
                &quot;line&quot;: 197,
                &quot;path&quot;: &quot;lib/heap/src/init.luau&quot;
            }
        },
        {
            &quot;name&quot;: &quot;Push&quot;,
            &quot;desc&quot;: &quot;Inserts a value into the heap.\n\n*Time Complexity:* Runs in worst case `O(log n)` time.\n\n```lua\nlocal minHeap = Heap.min()\n\nminHeap:Push(\&quot;A\&quot;, 5)\nminHeap:Push(\&quot;B\&quot;, 2)\nminHeap:Push(\&quot;C\&quot;, 8)\n\nlocal minValue, minCost = minHeap:Peek()\nprint(minValue, minCost) -- B 2\n```\n\n:::info Cost\nIf no **cost** is given, the value itself is used as the cost.\nEnsure that the given value is comparable with relational operators.\n```lua\nlocal minHeap = Heap.min()\nminHeap:Push(2) -- uses 2 for both value and cost\nprint(minHeap:Peek()) -- 2 2\n```\n:::&quot;,
            &quot;params&quot;: [
                {
                    &quot;name&quot;: &quot;value&quot;,
                    &quot;desc&quot;: &quot;&quot;,
                    &quot;lua_type&quot;: &quot;T&quot;
                },
                {
                    &quot;name&quot;: &quot;cost&quot;,
                    &quot;desc&quot;: &quot;&quot;,
                    &quot;lua_type&quot;: &quot;number?&quot;
                }
            ],
            &quot;returns&quot;: [],
            &quot;function_type&quot;: &quot;method&quot;,
            &quot;source&quot;: {
                &quot;line&quot;: 229,
                &quot;path&quot;: &quot;lib/heap/src/init.luau&quot;
            }
        },
        {
            &quot;name&quot;: &quot;Pop&quot;,
            &quot;desc&quot;: &quot;Removes and returns the top value from the heap.\n\n*Time Complexity:* Runs in worst case `O(log n)` time.&quot;,
            &quot;params&quot;: [],
            &quot;returns&quot;: [
                {
                    &quot;desc&quot;: &quot;&quot;,
                    &quot;lua_type&quot;: &quot;T?&quot;
                },
                {
                    &quot;desc&quot;: &quot;&quot;,
                    &quot;lua_type&quot;: &quot;number?&quot;
                }
            ],
            &quot;function_type&quot;: &quot;method&quot;,
            &quot;source&quot;: {
                &quot;line&quot;: 257,
                &quot;path&quot;: &quot;lib/heap/src/init.luau&quot;
            }
        },
        {
            &quot;name&quot;: &quot;Size&quot;,
            &quot;desc&quot;: &quot;Returns the number of elements in the heap.\nEquivalent to using the `#` operator on the heap.\n\n*Time Complexity:* Runs in `O(1)` time.&quot;,
            &quot;params&quot;: [],
            &quot;returns&quot;: [
                {
                    &quot;desc&quot;: &quot;&quot;,
                    &quot;lua_type&quot;: &quot;number\r\n&quot;
                }
            ],
            &quot;function_type&quot;: &quot;method&quot;,
            &quot;source&quot;: {
                &quot;line&quot;: 291,
                &quot;path&quot;: &quot;lib/heap/src/init.luau&quot;
            }
        },
        {
            &quot;name&quot;: &quot;Has&quot;,
            &quot;desc&quot;: &quot;Takes a value or function and checks if the heap contains it.\nIf a cost is provided then it will also ensure the cost matches.\nReturns true if the heap contains a specified value.\n\n*Time Complexity:* Runs in worst case `O(n)` time.&quot;,
            &quot;params&quot;: [
                {
                    &quot;name&quot;: &quot;valueToCheckFor&quot;,
                    &quot;desc&quot;: &quot;&quot;,
                    &quot;lua_type&quot;: &quot;T&quot;
                },
                {
                    &quot;name&quot;: &quot;cost&quot;,
                    &quot;desc&quot;: &quot;&quot;,
                    &quot;lua_type&quot;: &quot;number?&quot;
                }
            ],
            &quot;returns&quot;: [
                {
                    &quot;desc&quot;: &quot;&quot;,
                    &quot;lua_type&quot;: &quot;boolean\r\n&quot;
                }
            ],
            &quot;function_type&quot;: &quot;method&quot;,
            &quot;source&quot;: {
                &quot;line&quot;: 302,
                &quot;path&quot;: &quot;lib/heap/src/init.luau&quot;
            }
        },
        {
            &quot;name&quot;: &quot;ToArray&quot;,
            &quot;desc&quot;: &quot;Converts the heap into an array of `{Value: T, Cost: number}` objects.\nThis is useful for iterating over the heap in a more structured way\nwithout the worry of it changing during iteration.&quot;,
            &quot;params&quot;: [],
            &quot;returns&quot;: [
                {
                    &quot;desc&quot;: &quot;&quot;,
                    &quot;lua_type&quot;: &quot;{{Value: T, Cost: number}}&quot;
                }
            ],
            &quot;function_type&quot;: &quot;method&quot;,
            &quot;private&quot;: true,
            &quot;unreleased&quot;: true,
            &quot;source&quot;: {
                &quot;line&quot;: 322,
                &quot;path&quot;: &quot;lib/heap/src/init.luau&quot;
            }
        },
        {
            &quot;name&quot;: &quot;UpdateCost&quot;,
            &quot;desc&quot;: &quot;Updates the cost of a value in the heap. If no value is found, false is returned.\n:::caution Repeated Values\nIf you have multiple instances of the same value, this method will only update the cost of the first valid instance found,\nunless the third parameter `updateAll` is set to `true`. There is no guarantee of which instance will be found first.\nUsing `updateAll` can be expensive as it may need to perform a large resorting of the heap to ensure proper ordering.\n:::\n\n```lua\nlocal minHeap = Heap.min()\nminHeap:Push(\&quot;A\&quot;, 5)\nminHeap:Push(\&quot;B\&quot;, 2)\nminHeap:Push(\&quot;C\&quot;, 8)\nminHeap:Push(\&quot;D\&quot;, 10)\n\nprint(minHeap:Peek()) -- B 2\nminHeap:UpdateCost(\&quot;A\&quot;, 1)\nprint(minHeap:Peek()) -- A 1\n```\n```lua\n    -- update the cost of the first value that matches either \&quot;A\&quot; or \&quot;B\&quot; to 15\nminHeap:UpdateCost(function(value)\n    return value == \&quot;A\&quot; or value == \&quot;B\&quot;\nend, 15, false)\n\n-- update the cost of all values that match \&quot;A\&quot; or \&quot;B\&quot; to 30\nminHeap:UpdateCost(function(value)\n    return value == \&quot;A\&quot; or value == \&quot;B\&quot;\nend, 30, true)\n```&quot;,
            &quot;params&quot;: [
                {
                    &quot;name&quot;: &quot;valueToUpdate&quot;,
                    &quot;desc&quot;: &quot;The value to update the cost of.&quot;,
                    &quot;lua_type&quot;: &quot;T | (value: T) -&gt; (boolean)&quot;
                },
                {
                    &quot;name&quot;: &quot;newCost&quot;,
                    &quot;desc&quot;: &quot;The new cost to assign to the value. Can also be a function that takes the old cost and returns a new cost.&quot;,
                    &quot;lua_type&quot;: &quot;number | (value: T, oldCost: number) -&gt; number&quot;
                },
                {
                    &quot;name&quot;: &quot;updateAll&quot;,
                    &quot;desc&quot;: &quot;If true, all occurrences of the value will be updated. Defaults to false.&quot;,
                    &quot;lua_type&quot;: &quot;boolean?\r\n&quot;
                }
            ],
            &quot;returns&quot;: [
                {
                    &quot;desc&quot;: &quot;True if the cost was updated, false otherwise.&quot;,
                    &quot;lua_type&quot;: &quot;boolean&quot;
                }
            ],
            &quot;function_type&quot;: &quot;method&quot;,
            &quot;unreleased&quot;: true,
            &quot;source&quot;: {
                &quot;line&quot;: 366,
                &quot;path&quot;: &quot;lib/heap/src/init.luau&quot;
            }
        },
        {
            &quot;name&quot;: &quot;GetCost&quot;,
            &quot;desc&quot;: &quot;*This has been removed from the public API Docs as it can be\nachieved by iterating over the heap and counting the occurrences.*\n\nReturns the cost given to a value. If no value is found, nil is returned.\n:::caution Repeated Values\nIf you have multiple instances of the same value, this method will return the cost of the first instance found.\nThere is no guarantee of which instance will be found first.\n:::&quot;,
            &quot;params&quot;: [
                {
                    &quot;name&quot;: &quot;valueToCheckCostOf&quot;,
                    &quot;desc&quot;: &quot;&quot;,
                    &quot;lua_type&quot;: &quot;T&quot;
                }
            ],
            &quot;returns&quot;: [
                {
                    &quot;desc&quot;: &quot;&quot;,
                    &quot;lua_type&quot;: &quot;number?\r\n&quot;
                }
            ],
            &quot;function_type&quot;: &quot;method&quot;,
            &quot;private&quot;: true,
            &quot;source&quot;: {
                &quot;line&quot;: 434,
                &quot;path&quot;: &quot;lib/heap/src/init.luau&quot;
            }
        },
        {
            &quot;name&quot;: &quot;CountOccurrences&quot;,
            &quot;desc&quot;: &quot;Returns the number of occurrences of a value in the heap.\n\n*This has been removed from the public API Docs as it can be\nachieved by iterating over the heap and counting the occurrences.*\n\n*Time Complexity:* Runs in `O(n)` time.&quot;,
            &quot;params&quot;: [
                {
                    &quot;name&quot;: &quot;valueToCheckFor&quot;,
                    &quot;desc&quot;: &quot;&quot;,
                    &quot;lua_type&quot;: &quot;T&quot;
                }
            ],
            &quot;returns&quot;: [
                {
                    &quot;desc&quot;: &quot;&quot;,
                    &quot;lua_type&quot;: &quot;number\r\n&quot;
                }
            ],
            &quot;function_type&quot;: &quot;method&quot;,
            &quot;private&quot;: true,
            &quot;source&quot;: {
                &quot;line&quot;: 455,
                &quot;path&quot;: &quot;lib/heap/src/init.luau&quot;
            }
        },
        {
            &quot;name&quot;: &quot;RemoveFirstOccurrence&quot;,
            &quot;desc&quot;: &quot;Removes the first occurrence of a given value from the heap.\nHeaps are not optimized for search removals, so this method should\nbe used sparingly.&quot;,
            &quot;params&quot;: [
                {
                    &quot;name&quot;: &quot;valueToRemove&quot;,
                    &quot;desc&quot;: &quot;&quot;,
                    &quot;lua_type&quot;: &quot;T&quot;
                }
            ],
            &quot;returns&quot;: [
                {
                    &quot;desc&quot;: &quot;&quot;,
                    &quot;lua_type&quot;: &quot;boolean\r\n&quot;
                }
            ],
            &quot;function_type&quot;: &quot;method&quot;,
            &quot;source&quot;: {
                &quot;line&quot;: 470,
                &quot;path&quot;: &quot;lib/heap/src/init.luau&quot;
            }
        },
        {
            &quot;name&quot;: &quot;RemoveAllOccurrences&quot;,
            &quot;desc&quot;: &quot;Removes all occurrences of a value from the heap and returns the\nnumber of occurrences removed. Heaps are not optimized for search \nremovals, so this method should be used sparingly.&quot;,
            &quot;params&quot;: [
                {
                    &quot;name&quot;: &quot;valueToRemove&quot;,
                    &quot;desc&quot;: &quot;&quot;,
                    &quot;lua_type&quot;: &quot;T&quot;
                }
            ],
            &quot;returns&quot;: [
                {
                    &quot;desc&quot;: &quot;&quot;,
                    &quot;lua_type&quot;: &quot;number\r\n&quot;
                }
            ],
            &quot;function_type&quot;: &quot;method&quot;,
            &quot;source&quot;: {
                &quot;line&quot;: 499,
                &quot;path&quot;: &quot;lib/heap/src/init.luau&quot;
            }
        },
        {
            &quot;name&quot;: &quot;ToTree&quot;,
            &quot;desc&quot;: &quot;A utility method that converts the heap into a tree structure.\nThis is useful for debugging and visualizing the heap.\n\n`type Branch&lt;T&gt; = {Value: T, Left: Branch&lt;T&gt;?, Right: Branch&lt;T&gt;?}`&quot;,
            &quot;params&quot;: [],
            &quot;returns&quot;: [
                {
                    &quot;desc&quot;: &quot;A tree representation of the heap.&quot;,
                    &quot;lua_type&quot;: &quot;Branch&lt;T&gt;?&quot;
                }
            ],
            &quot;function_type&quot;: &quot;method&quot;,
            &quot;source&quot;: {
                &quot;line&quot;: 531,
                &quot;path&quot;: &quot;lib/heap/src/init.luau&quot;
            }
        },
        {
            &quot;name&quot;: &quot;_heapifyUp&quot;,
            &quot;desc&quot;: &quot;Restores the heap order by moving a node up towards the root.\n\nThis is excessively large bc splitting the min/max heap comparators reduces\nthe number of comparisons each loop. Its not a huge performance boost, but\nit is a performance boost.&quot;,
            &quot;params&quot;: [
                {
                    &quot;name&quot;: &quot;index&quot;,
                    &quot;desc&quot;: &quot;&quot;,
                    &quot;lua_type&quot;: &quot;number&quot;
                }
            ],
            &quot;returns&quot;: [],
            &quot;function_type&quot;: &quot;method&quot;,
            &quot;private&quot;: true,
            &quot;source&quot;: {
                &quot;line&quot;: 555,
                &quot;path&quot;: &quot;lib/heap/src/init.luau&quot;
            }
        },
        {
            &quot;name&quot;: &quot;_heapifyDown&quot;,
            &quot;desc&quot;: &quot;Restores the heap order by moving a node down towards the leaves.\n\nThis is excessively large bc splitting the min/max heap comparators reduces\nthe number of comparisons each loop. Its not a huge performance boost, but\nit is a performance boost.&quot;,
            &quot;params&quot;: [
                {
                    &quot;name&quot;: &quot;index&quot;,
                    &quot;desc&quot;: &quot;&quot;,
                    &quot;lua_type&quot;: &quot;number&quot;
                }
            ],
            &quot;returns&quot;: [],
            &quot;function_type&quot;: &quot;method&quot;,
            &quot;private&quot;: true,
            &quot;source&quot;: {
                &quot;line&quot;: 592,
                &quot;path&quot;: &quot;lib/heap/src/init.luau&quot;
            }
        },
        {
            &quot;name&quot;: &quot;__len&quot;,
            &quot;desc&quot;: &quot;Metamethod for the len operator `#`.\n\nReturns the number of elements in the heap.\n```lua\nlocal minHeap = Heap.min()\nminHeap:Push(\&quot;A\&quot;, 5)\nminHeap:Push(\&quot;B\&quot;, 2)\nprint(#minHeap) -- 2\n```&quot;,
            &quot;params&quot;: [],
            &quot;returns&quot;: [
                {
                    &quot;desc&quot;: &quot;&quot;,
                    &quot;lua_type&quot;: &quot;number\r\n&quot;
                }
            ],
            &quot;function_type&quot;: &quot;method&quot;,
            &quot;tags&quot;: [
                &quot;metamethod&quot;
            ],
            &quot;private&quot;: true,
            &quot;source&quot;: {
                &quot;line&quot;: 650,
                &quot;path&quot;: &quot;lib/heap/src/init.luau&quot;
            }
        },
        {
            &quot;name&quot;: &quot;__tostring&quot;,
            &quot;desc&quot;: &quot;Metamethod for tostring.\n\nAttempts to return a string representation of the heap in a tree like display.&quot;,
            &quot;params&quot;: [],
            &quot;returns&quot;: [
                {
                    &quot;desc&quot;: &quot;&quot;,
                    &quot;lua_type&quot;: &quot;string\r\n&quot;
                }
            ],
            &quot;function_type&quot;: &quot;method&quot;,
            &quot;tags&quot;: [
                &quot;metamethod&quot;
            ],
            &quot;private&quot;: true,
            &quot;source&quot;: {
                &quot;line&quot;: 661,
                &quot;path&quot;: &quot;lib/heap/src/init.luau&quot;
            }
        },
        {
            &quot;name&quot;: &quot;__iter&quot;,
            &quot;desc&quot;: &quot;MetaMethod for iterating over the heap.\nIn a for loop, the first variable is the `Value` and the second variable is the `Cost`.\n\n```lua\nlocal minHeap = Heap.min()\nminHeap:Push(\&quot;A\&quot;, 5)\nminHeap:Push(\&quot;B\&quot;, 2)\nminHeap:Push(\&quot;C\&quot;, 8)\nminHeap:Push(\&quot;A\&quot;, 4)\nminHeap:Push(\&quot;D\&quot;, 10)\n\nfor value: string, cost: number in minHeap do\n    print(value, cost)\nend\n```\n```\n-- Output: the order may vary\nB 2\nA 4\nC 8\nA 5\nD 10\n```\n\n:::caution Manipulating the Heap during iteration\nIt is not recommended to modify the Heap during iteration as it may cause undefined behavior.\nInternal orders may change and the iterator may not be able to find the next value.\n:::\n\n:::caution Iteration Order\nThere is no guaranteed order of iteration. You should assume you will receive the values in a random order.\n:::&quot;,
            &quot;params&quot;: [],
            &quot;returns&quot;: [
                {
                    &quot;desc&quot;: &quot;&quot;,
                    &quot;lua_type&quot;: &quot;value: T&quot;
                },
                {
                    &quot;desc&quot;: &quot;&quot;,
                    &quot;lua_type&quot;: &quot;cost: number&quot;
                }
            ],
            &quot;function_type&quot;: &quot;method&quot;,
            &quot;tags&quot;: [
                &quot;metamethod&quot;
            ],
            &quot;source&quot;: {
                &quot;line&quot;: 723,
                &quot;path&quot;: &quot;lib/heap/src/init.luau&quot;
            }
        }
    ],
    &quot;properties&quot;: [
        {
            &quot;name&quot;: &quot;ClassName&quot;,
            &quot;desc&quot;: &quot;Just a simple string identifier for the class name.&quot;,
            &quot;lua_type&quot;: &quot;\&quot;Heap\&quot;&quot;,
            &quot;tags&quot;: [
                &quot;static&quot;
            ],
            &quot;private&quot;: true,
            &quot;source&quot;: {
                &quot;line&quot;: 147,
                &quot;path&quot;: &quot;lib/heap/src/init.luau&quot;
            }
        }
    ],
    &quot;types&quot;: [],
    &quot;name&quot;: &quot;Heap&quot;,
    &quot;desc&quot;: &quot;A generic [Heap](https://en.wikipedia.org/wiki/Heap_(data_structure)) implementation for both min and max heaps. It is designed\nfor allowing the association of a cost to a given value so that users are not restricted to just numbers as values.\n\n### *What is a Heap?*\nHeaps are an implementation of [Priority Queues](https://en.wikipedia.org/wiki/Priority_queue) that excel at tracking the smallest\nor largest element in an array. They are commonly used in algorithms like Dijkstra&#x27;s shortest path algorithm and Huffman coding.\n\n### Examples:\n\n```lua title=\&quot;Min Heap\&quot;\nlocal minHeap = Heap.min()\nminHeap:Push(\&quot;A\&quot;, 5) -- A is the value, and 5 is the cost associated with it\nminHeap:Push(\&quot;B\&quot;, 2)\nminHeap:Push(\&quot;C\&quot;, 8)\nminHeap:Push(\&quot;D\&quot;, 4)\n\n-- look at the current lowest value\nlocal minValue, minCost = minHeap:Peek()\nprint(minValue, minCost) -- B 2\n```\n```lua title=\&quot;Max Heap\&quot;\nlocal maxHeap = Heap.max()\nminHeap:Push(\&quot;A\&quot;, 5)\nminHeap:Push(\&quot;B\&quot;, 2)\nminHeap:Push(\&quot;C\&quot;, 8)\nminHeap:Push(\&quot;D\&quot;, 4)\n\nlocal poppedValue, costOfPoppedValue = maxHeap:Pop() -- pops off the top value\nprint(poppedValue, costOfPoppedValue) -- C 8\n\n-- look at the new highest value\nprint(maxHeap:Peek()) -- A 5\n```\n\n___\n:::tip MetaMethods\nSupports the following metamethods:\n- `__tostring`: Returns a string representation of the heap in a tree like display.\n- [`__len`](/api/Heap#Size): Returns the number of elements in the heap. Equivalent to calling [`:Size()`](/api/Heap#Size).\n    ```lua\n    local minHeap = Heap.min()\n    minHeap:Push(\&quot;A\&quot;, 5)\n    minHeap:Push(\&quot;B\&quot;, 2)\n    print(#minHeap) -- 2\n    ```\n- [`__iter`](/api/Heap#__iter): Provides an iterator for for loop usage\n:::\n\n:::tip Exported Types\nThis file exports a Heap type in the form of **`Heap&lt;T&gt;`** where **`T`** is the type of value stored in the heap.\nUsually Luau can infer the type of **`T`** from your usage, but it may be useful to manually provide the type if\nyou are using more complex datatypes.\n```lua\nlocal Heap = require(ReplicatedStorage.Heap)\ntype Heap&lt;T&gt; = Heap.Heap&lt;T&gt;\n\nlocal myHeap: Heap&lt;string&gt; = Heap.min()\nmyHeap:Push(\&quot;A\&quot;, 5)\n```\n:::\n\n:::info Info for Nerds\n*Read this only if you want to know more about the internals of this heap implmenentation.*\n\nIn order to support the association of a cost to a value, the heap is implemented as three separate arrays.\nOne to store the values, one to store the costs, and one to store the index pointing to the first two.\nI used this structure in order to optimize for cache hits on table lookups since using an object based \napproach `Ex: {Value: T, Cost: number}` could cause the CPU to potentially miss the `Cost` data since it may\nnot be stored continguously in memory.\n\nWhen a value is popped from the heap, its reference index is stored in a stack of open indices for reuse.\nThis is done to hopefully reduce fragmentation of the heap and improve the likelyhood of cache hits.\n\nI originally opted to use a dynamic cost system such that you would provide a comparator function\nto the constructor that would be used to determine the cost of each value. However, this introduced\na number of potential issues such as if the comparator function was not deterministic, causing the order to desync.\nThere could very likely be cases where the cost could change without the heap&#x27;s knowledge of it. So instead I opted\nto require the cost to be provided at the time of insertion. Although technically the type definition specifies for\nonly number costs, you could in theory use any type luau considers comparable with relational operators.\n:::&quot;,
    &quot;source&quot;: {
        &quot;line&quot;: 86,
        &quot;path&quot;: &quot;lib/heap/src/init.luau&quot;
    }
}</pre></details></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#types" class="table-of-contents__link toc-highlight">Types</a></li><li><a href="#properties" class="table-of-contents__link toc-highlight">Properties</a></li><li><a href="#functions" class="table-of-contents__link toc-highlight">Functions</a><ul><li><a href="#__iter" class="table-of-contents__link toc-highlight">:__iter</a></li><li><a href="#Has" class="table-of-contents__link toc-highlight">:Has</a></li><li><a href="#Peek" class="table-of-contents__link toc-highlight">:Peek</a></li><li><a href="#Pop" class="table-of-contents__link toc-highlight">:Pop</a></li><li><a href="#Push" class="table-of-contents__link toc-highlight">:Push</a></li><li><a href="#RemoveAllOccurrences" class="table-of-contents__link toc-highlight">:RemoveAllOccurrences</a></li><li><a href="#RemoveFirstOccurrence" class="table-of-contents__link toc-highlight">:RemoveFirstOccurrence</a></li><li><a href="#Size" class="table-of-contents__link toc-highlight">:Size</a></li><li><a href="#ToTree" class="table-of-contents__link toc-highlight">:ToTree</a></li><li><a href="#UpdateCost" class="table-of-contents__link toc-highlight">:UpdateCost</a></li><li><a href="#max" class="table-of-contents__link toc-highlight">.max</a></li><li><a href="#min" class="table-of-contents__link toc-highlight">.min</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Raild3x. Built with Moonwave and Docusaurus.</div></div></div></footer></div>
<script src="/ModulesOnRails/assets/js/runtime~main.daa86be0.js"></script>
<script src="/ModulesOnRails/assets/js/main.770f3d02.js"></script>
</body>
</html>